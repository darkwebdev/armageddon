(function(c){c.scrollingParallax=function(h,a){function I(){a.enableVertical&&(m=e.height(),t=j.height(),B=u.height(),v=(a.parallaxHeight||m)-t,0>v&&(v=a.staticSpeed?t-m:a.reverseDirection?t-n-m:n,C=!0),p&&!D&&(D=-1*(B-m)),a.loopIt&&(w=parseInt(u.scrollTop()/(C?t:m))));a.enableHorizontal&&(q=e.width(),x=j.width(),E=u.width(),z=(a.parallaxWidth||q)-x,0>z&&(z=a.staticSpeedX?x-q:a.reverseDirectionX?x-r-q:r,F=!0),p&&!G&&(G=-1*(E-q)),a.loopItX&&(y=parseInt(u.scrollLeft()/(F?x:q))));J()}function J(){e.queue([]);
    var A={};if(a.enableVertical){var H=K(!0);A.top=H}if(a.enableHorizontal){var b=K(!1);A.left=b}!c.browser.msie&&(100<Math.abs(L-H)||100<Math.abs(M-b))?e.animate(A,30):e.css(A);L=H;M=b}function K(c){if(c)var e=u.scrollTop(),b=B,g=t,h=m,f=v,d=w,k=n,f=v,j=C,s=D,l={reverseDirection:a.reverseDirection,staticSpeed:a.staticSpeed,loopIt:a.loopIt,staticScrollLimit:a.staticScrollLimit};else e=u.scrollLeft(),b=E,g=x,h=q,d=y,k=r,f=z,j=F,s=G,l={reverseDirection:a.reverseDirectionX,staticSpeed:a.staticSpeedX,loopIt:a.loopItX,
    staticScrollLimit:a.staticScrollLimitX};l.staticSpeed?(b=e*l.staticSpeed,b-=f*d):b=e/(b-g)*f;l.reverseDirection||(b*=-1);b+=k;if(l.staticSpeed){d=b;k=l;if(k.loopIt){for(;d<f;)d+=f,b=k.reverseDirection?-1:1,c?w+=b:y+=b;for(;d>(k.reverseDirection?-1:0);)d-=f,b=k.reverseDirection?-1:1,c?w-=b:y-=b}else k.staticScrollLimit&&(j?(0>d&&(d=0),d>f&&(d=f)):(0<d&&(d=0),-1*d>f&&(d=-1*f)));b=d}j&&(l.staticSpeed&&l.loopIt)&&(b+=g-h);p&&(b=Math.max(parseInt(b+e),parseInt(s)));return b}a=a||{};a.enableVertical="undefined"!=
    typeof a.enableVertical?a.enableVertical:!0;a.enableVertical&&(a.staticSpeed=a.staticSpeed||!1,a.staticScrollLimit="undefined"!=typeof a.staticScrollLimit?a.staticScrollLimit:!0,a.loopIt=a.loopIt||!1,a.reverseDirection=a.reverseDirection||!1);a.enableHorizontal=a.enableHorizontal||!1;a.enableHorizontal&&(a.staticSpeedX=a.staticSpeedX||!1,a.staticScrollLimitX="undefined"!=typeof a.staticScrollLimitX?a.staticScrollLimitX:!0,a.loopItX=a.loopItX||!1,a.reverseDirectionX=a.reverseDirectionX||!1);a.disableIE6=
    a.disableIE6||!1;a.disableIE6Anim="undefined"!=typeof a.disableIE6Anim?a.disableIE6Anim:!0;a.bgWidth=a.bgWidth||(a.enableHorizontal?"150%":"100%");a.bgHeight=a.bgHeight||"150%";a.bgRepeat=a.bgRepeat||!1;a.appendInFront=a.appendInFront||!1;a.parallaxHeight=a.parallaxHeight||!1;a.parallaxWidth=a.parallaxWidth||!1;var p=c.browser.msie&&7>c.browser.version?!0:!1;if(a.disableIE6&&p)return!1;var u=c(document),j=c(window),e,g=!1;if(a.enableVertical)var m,t,B,v,D=0,w=0,n=0,C=!1,L=null;if(a.enableHorizontal)var q,
    x,E,z,G=0,y=0,r=0,F=!1,M=null;if("string"==typeof h){g={display:"block",top:0,left:0,width:a.bgWidth,height:a.bgHeight,zIndex:0};g.position=p?"absolute":"fixed";if(a.bgRepeat){var s=a.appendInFront?c("<div></div>").appendTo(c("body")):c("<div></div>").prependTo(c("body"));g.backgroundRepeat="repeat";g.backgroundImage='url("'+h+'")'}else s=a.appendInFront?c("<img />").appendTo(c("body")):c("<img />").prependTo(c("body")),s.attr("src",h);s.css(g);g=!0;e=s}else e=c(h),e.css("position",p?"absolute":"fixed"),
    a.enableVertical&&(n=parseInt(e.css("top"))),a.enableHorizontal&&(r=parseInt(e.css("left")));if(!a.disableIE6Anim||!p)I(),g&&(a.reverseDirection&&a.enableVertical&&(n+=-1*v,e.css("top",n)),a.reverseDirectionX&&a.enableHorizontal&&(r+=-1*z,e.css("left",r))),j.scroll(function(){J()}),j.resize(function(){I()})};c.fn.scrollingParallax=function(h){this.each(function(){new c.scrollingParallax(this,h)});return this}})(jQuery);